<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="./css/nis.css" />
    <link rel="stylesheet" type="text/css" href="./css/style.css" />
  </head>
  <body class="nis">
    <div id="output"></div>
    <div id="settings" class="hidden" x-data="buffsData">
      <div class="header-buttons">
        <button x-on:click="setOverlayPosition()" class="nisbutton">Set overlay</button>
        <a href="https://discord.gg/3A3kE8Pjvp" target="_blank" class="nisbutton discord"> Discord </a>
      </div>
      <p>
        [Info] Buffs with duration â‰¤59s update in real-time. Buffs >60s (e.g., 5 minutes) start counting down once the game updates their timer (e.g., when it
        changes from 5m to 4m59s).
      </p>
      <h2>Buff history</h2>
      <div id="buffs-output">
        <template x-for="(buff, index) in buffs" :key="buff.name">
          <div
            class="buff-row"
            :class="{ 'disabled': buff.inactive, 'exclude-me': !buff.isPinned }"
            :data-buff-name="buff.name"
            draggable="true"
            @dragstart="onDragStart($event, index)"
            @dragend="onDragEnd($event)"
            @dragover="onDragOver($event)"
            @drop="onDrop($event, index)"
          >
            <div class="stat-icon buff-icon">
              <img class="buff-icon-img" :src="buff.imagePath" :alt="buff.name" />
            </div>
            <div class="buff-bar-track" :class="{ 'flashing': buff.progress <= 30 && !buff.inactive && buff.cooldown <= 60 }">
              <div class="bar-fill adren-fill" :style="{ width: buff.progress + '%' }"></div>
              <span class="buff-label">
                <span class="buff-name" x-text="buff.name"></span>
                <span class="buff-timer" x-text="formatTime(buff.cooldown)"></span>
              </span>
            </div>
            <button
              class="pin-button exclude-me"
              :class="{ 'pinned': buff.isPinned }"
              @click="togglePin(buff.name)"
              type="button"
              :aria-label="buff.isPinned ? 'Unpin buff' : 'Pin buff'"
            >
              <svg viewBox="0 0 24 24" class="pin-icon" fill="currentColor">
                <path d="M16,12V4H17V2H7V4H8V12L6,14V16H11.2V22H12.8V16H18V14L16,12Z" />
              </svg>
            </button>
            <button
              class="audio-button exclude-me"
              :class="{ 'queued': buff.isAudioQueued }"
              @click="toggleAudioQueue(buff.name)"
              type="button"
              :aria-label="buff.isAudioQueued ? 'Remove from audio queue' : 'Add to audio queue'"
            >
              <svg viewBox="0 0 24 24" class="audio-icon" fill="currentColor">
                <path
                  d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"
                />
              </svg>
            </button>
          </div>
        </template>
      </div>
    </div>

    <script src="./main.js"></script>
  </body>
</html>
